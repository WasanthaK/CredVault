<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:CredVault.Mobile.ViewModels"
             x:Class="CredVault.Mobile.Views.LoginPage"
             x:DataType="viewmodels:LoginViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{AppThemeBinding Light=#F6F7F8, Dark=#101822}"
             Title="Login">
    
    <ScrollView>
        <VerticalStackLayout Padding="24,40" Spacing="0" VerticalOptions="Center" MaximumWidthRequest="500">
            
            <!-- Logo Circle with Check Icon -->
            <Border BackgroundColor="{StaticResource Primary}"
                    StrokeThickness="0"
                    HeightRequest="64"
                    WidthRequest="64"
                    StrokeShape="RoundRectangle 32"
                    Margin="0,0,0,32"
                    HorizontalOptions="Center">
                <Label Text="âœ“"
                       FontSize="36"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </Border>
            
            <!-- Headline -->
            <Label Text="Welcome Back" 
                   FontSize="28" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="{AppThemeBinding Light=#1F2937, Dark=White}"
                   Margin="0,0,0,8"/>
            
            <!-- Subheading -->
            <Label Text="Log in to your GovStack Wallet account" 
                   FontSize="16" 
                   HorizontalOptions="Center"
                   TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"
                   Margin="0,0,0,32"/>
            
            <!-- Input Form -->
            <VerticalStackLayout Spacing="16" Margin="0,0,0,16">
                
                <!-- Email Field -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Email Address"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#374151, Dark=#D1D5DB}"/>
                    <Border StrokeThickness="1"
                            Stroke="{AppThemeBinding Light=#D1D5DB, Dark=#4B5563}"
                            StrokeShape="RoundRectangle 8"
                            BackgroundColor="{AppThemeBinding Light=White, Dark=#1F2937}">
                        <Entry Text="{Binding Email}"
                               Placeholder="Enter your email"
                               PlaceholderColor="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}"
                               TextColor="{AppThemeBinding Light=#1F2937, Dark=White}"
                               BackgroundColor="Transparent"
                               Keyboard="Email"
                               HeightRequest="48"
                               AutomationId="EmailEntry"/>
                    </Border>
                </VerticalStackLayout>
                
                <!-- Password Field -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Password"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#374151, Dark=#D1D5DB}"/>
                    <Border StrokeThickness="1"
                            Stroke="{AppThemeBinding Light=#D1D5DB, Dark=#4B5563}"
                            StrokeShape="RoundRectangle 8"
                            BackgroundColor="{AppThemeBinding Light=White, Dark=#1F2937}">
                        <Entry Text="{Binding Password}"
                               Placeholder="Enter your password"
                               PlaceholderColor="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}"
                               TextColor="{AppThemeBinding Light=#1F2937, Dark=White}"
                               BackgroundColor="Transparent"
                               IsPassword="True"
                               HeightRequest="48"
                               AutomationId="PasswordEntry"/>
                    </Border>
                    <Label Text="Forgot Password?" 
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="End" />
                </VerticalStackLayout>
                
                <!-- Error Message -->
                <Border IsVisible="{Binding HasError}"
                        StrokeThickness="1"
                        Stroke="{AppThemeBinding Light=#DC2626, Dark=#EF4444}"
                        StrokeShape="RoundRectangle 8"
                        BackgroundColor="{AppThemeBinding Light=#FEE2E2, Dark=#7F1D1D}"
                        Padding="12">
                    <Label Text="{Binding ErrorMessage}"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=#DC2626, Dark=#EF4444}"/>
                </Border>
                
            </VerticalStackLayout>
            
            <!-- Action Buttons -->
            <VerticalStackLayout Spacing="16" Margin="0,0,0,24">
                
                <!-- Login Button -->
                <Button Text="Log In"
                        Command="{Binding LoginCommand}"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="White"
                        FontSize="16"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        HeightRequest="48"
                        AutomationId="LoginButton"/>
                
                <!-- Loading Indicator -->
                <ActivityIndicator IsRunning="{Binding IsBusy}"
                                  IsVisible="{Binding IsBusy}"
                                  Color="{StaticResource Primary}"
                                  HeightRequest="32"/>
                
                <!-- Biometric Login Button -->
                <Border StrokeThickness="1"
                        Stroke="{AppThemeBinding Light=#D1D5DB, Dark=#4B5563}"
                        StrokeShape="RoundRectangle 8"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1F2937}">
                    <Button Text="ðŸ” Log in with Biometrics"
                            Command="{Binding LoginWithOAuthCommand}"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light=#374151, Dark=#D1D5DB}"
                            FontSize="16"
                            FontAttributes="Bold"
                            HeightRequest="48"
                            AutomationId="BiometricButton"/>
                </Border>
                
            </VerticalStackLayout>
            
            <!-- Footer Link -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="4">
                <Label Text="Don't have an account?"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
                <Label Text="Sign up"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{StaticResource Primary}"
                       TextDecorations="Underline">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding NavigateToRegisterCommand}"/>
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
